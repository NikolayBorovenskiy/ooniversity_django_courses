{% extends "base.HTML" %}

{% load static from staticfiles %}

{% block title %}IT Bursa - {{ course.name|title }}{% endblock title %}


{% block nav_class_courses %}active{% endblock %}


{% block css_for_page %}
    <link href="{% static "students-list.css" %}" rel="stylesheet">
{% endblock css_for_page %}


{% block students_list %}<a href="{% url 'students:student-list' %}?course_id={{ course.id }}">студенты</a>{% endblock students_list %}

{% block main_content %}
<!--Вставка слайдера-->
{% include "inc_main_slider.HTML" with block_photo_slider=course.slider block_static=False %}
<!--Сообщение-->
{% include "inc_message.HTML" %}

  <div role="tabpanel">

    <!-- Nav tabs -->
    <ul class="nav nav-tabs" role="tablist">
      <li role="presentation" class="active"><a href="#home" aria-controls="home" role="tab" data-toggle="tab">Информация о курсе</a></li>
      <li role="presentation"><a href="#profile" aria-controls="profile" role="tab" data-toggle="tab">Программа курса</a></li>
      <li role="presentation"><a href="#messages" aria-controls="messages" role="tab" data-toggle="tab">Преподаватели курса</a></li>
      <li role="presentation"><a href="#settings" aria-controls="settings" role="tab" data-toggle="tab">Отзывы ({{ course.comment_set.all|length }})</a></li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
      <div role="tabpanel" class="tab-pane active" id="home">
        <div class="row">
          <h2 class="sub-header">{{ course.name }}</h2>
          <div class="course-info">
            <p><span class="glyphicon glyphicon-usd" aria-hidden="true"></span>{{ course.price }}</p>
            <p><span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>{{ course.start }}</p>
            <p><span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>{{ course.finish }}</p>
            <p><span class="glyphicon glyphicon-user" aria-hidden="true"></span>{{ course.student_set.all|length }}</p>
            {% if  course.active == 'not_begin' %}
                <p><a href="{% url 'courses:enroll-course' course.id %}" class="btn btn-success btn-lg btn-block" role="button">ЗАПИСАТЬСЯ</a> </p>
              {% elif course.active == 'finish' %}
                <p id='finish'>Курс окончен</p>
              {% elif course.active == 'begin' %}
                <p id='started'>Курс начат</p>
              {% endif %}
          </div>
          <p class = "p-courses">{{ course.discription }}</p>
        </div>
      </div>
      <div role="tabpanel" class="tab-pane" id="profile">
        <h2 class="media-heading">ПРОГРАММА КУРСА</h2>
        <div class="table-responsive">
          <table ip = 'base-python' class="table table-striped">
            <thead>
              <tr>
                <th>#</th>
                <th>ТЕМА</th>
                <th>СОДЕРЖАНИЕ</th>
              </tr>
            </thead>
            <tbody>
              {% for lesson in course.lesson_set.all %}
                <tr>
                  <td>
                    {{ forloop.counter }}
                  </td>
                  <td>
                    {{ lesson.theme }}
                  </td>
                  <td>
                    {{ lesson.discription }}
                  </td>
                </tr>
              {% empty %}
                ни один урок пока не создан
              {% endfor %}
            </tbody>
          </table>
        </div>
        <!--Кнопка добавить новый урок-->
        <div class="row">
          <a class="add btn btn-success btn-md " href="add_lesson/">
          <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Добавить новый урок
          </a>
        </div>
      </div>
      <div role="tabpanel" class="tab-pane" id="messages">
        <!--Курс Питон датальная информация представленная в табличной форме-->
        <h2 class="media-heading">ПРЕПОДАВАТЕЛИ КУРСА</h2>

        <!--Информация о преподавателе курса -->
        {% if course.teacher %}
          {% include 'inc_coach.HTML' with block_title='преподаватель' instructor=course.teacher %}
        {% else %}
          <p>Преподаватель курса пока не определен</p>
        {% endif %}
          <br><br>

        <!--Иформация о ассистенте курса -->
        {% if course.assistent %}
          {% include 'inc_coach.HTML' with block_title='ассистент' instructor=course.assistent %}
        {% else %}
          <p>Ассистент курса пока не определен</p>
        {% endif %}
      </div>
      <div role="tabpanel" class="tab-pane" id="settings">
        {% for comment in course.comment_set.all %}
          <div class="jumbotron">
            <h4>{{ comment.autor }}</h4>
            <p id='date-comment'>{{ comment.date_public }}</p>
            <p>{{ comment.discription }}</p>
            <div class="btn-group" role="group" aria-label="...">
              <a class="btn btn-default btn-sm" href="edit_comment/{{comment.id }}/">
                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
              </a>
              <a class="btn btn-default btn-sm" href="remove_comment/{{comment.id }}/">
                <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
              </a>
            </div>

          </div>
        {% empty %}
          <p>Комментариев и отзывов пока нет. Ваш отзыв будет первым!</p>
        {% endfor %}
        <!--Кнопка добавить новый комментарий-->
        <div class="row">
          <a class="add btn btn-success btn-md " href="add_comment/">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Добавить отзыв
          </a>
        </div>
      </div>
    </div>

  </div>
{% endblock main_content %}
